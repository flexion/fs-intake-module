<section class="usa-section">
  <div class="usa-grid">
    <h1>Apply for a Noncommercial Group Use Permit</h1>
    <p>All form fields are required unless otherwise noted.</p>
    <form class="usa-form-large" #form="ngForm" (ngSubmit)="onSubmit(form)">
      <fieldset>
        <legend>Applicant Information</legend>

        <div *ngIf="form._submitted && !form.valid" class="usa-alert usa-alert-error" role="alert">
          <div class="usa-alert-body">
            <h3 class="usa-alert-heading">There are errors in your application</h3>
            <p class="usa-alert-text">Please correct the errors before submitting.</p>
          </div>
        </div>

        <label class="usa-input" for="name">Event name</label>
        <input id="name" name="name" type="text" required [(ngModel)]="application.eventName" #name="ngModel" />
        <span id="name-error" class="usa-input-error-message" role="alert" [hidden]="name.valid || name.untouched">Event name is required</span>

        <fieldset>
          <legend>Are you applying as an individual or organization?</legend>
          <ul class="usa-unstyled-list">
            <li>
              <input id="individual" type="radio" name="applicant-type" value="Individual" [(ngModel)]="application.applicantInfo.orgType">
              <label for="individual">Individual</label>
            </li>
            <li>
              <input id="organization" type="radio" name="applicant-type" value="Corporation" [(ngModel)]="application.applicantInfo.orgType">
              <label for="organization">Organization</label>
            </li>
          </ul>
        </fieldset>

        <div *ngIf="application.applicantInfo.orgType === 'Individual'">
          <label class="usa-input" for="first-permit-holder-name">Primary permit holder name</label>
          <input id="first-permit-holder-name" name="first-permit-holder-name" type="text" required [(ngModel)]="application.applicantInfo.name" #primaryPermitHolderName="ngModel" />
          <span id="first-permit-holder-name-error" class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderName.valid || primaryPermitHolderName.untouched">Primary permit holder name is required</span>
        </div>

        <div *ngIf="application.applicantInfo.orgType === 'Corporation'">
          <label class="usa-input" for="organization-name">Organization name</label>
          <input id="organization-name" name="organization-name" type="text" required [(ngModel)]="application.applicantInfo.organizationName" #organizationName="ngModel" />
          <span id="organization-name-error" class="usa-input-error-message" role="alert" [hidden]="organizationName.valid || organizationName.untouched">Organization name is required</span>
        </div>

        <label class="usa-input" for="address">Address line 1</label>
        <input id="address" name="address" type="text" required [(ngModel)]="application.applicantInfo.mailingAddress" #address="ngModel" />
        <span id="address-error" class="usa-input-error-message" role="alert" [hidden]="address.valid || address.untouched">Address line 1 is required</span>

        <label class="usa-input" for="address-line-2">Address line 2 (optional)</label>
        <input id="address-line-2" name="address-line-2" type="text" [(ngModel)]="application.applicantInfo.mailingAddress2" />

        <label class="usa-input" for="city">City</label>
        <input id="city" name="city" type="text" required [(ngModel)]="application.applicantInfo.mailingCity" #city="ngModel" />
        <span id="city-error" class="usa-input-error-message" role="alert" [hidden]="city.valid || city.untouched">City is required</span>

        <label class="usa-input" for="state">State</label>
        <select id="state" name="state" required [(ngModel)]="application.applicantInfo.mailingState" #state="ngModel">
          <option value="" selected="selected"></option>
          <option *ngFor="let state of states" [value]="state">{{state}}</option>
        </select>
        <span id="state-error" class="usa-input-error-message" role="alert" [hidden]="state.valid || state.untouched">State is required</span>

        <label class="usa-input" for="zip">ZIP</label>
        <input id="zip" name="zip" type="text" minlength="5" maxlength="5" placeholder="55555" pattern="(^\d{5}$)" required [(ngModel)]="application.applicantInfo.mailingZIP" #zip="ngModel" />
        <span id="zip-error" class="usa-input-error-message" role="alert" [hidden]="zip.valid || zip.untouched">Valid ZIP code is required</span>

        <label class="usa-input" for="email">Email address</label>
        <input id="email" name="email" type="email" pattern="(^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$)" required [(ngModel)]="application.applicantInfo.emailAddress" #email="ngModel" />
        <span id="email-error" class="usa-input-error-message" role="alert" [hidden]="email.valid || email.untouched">Valid email address is required</span>

        <fieldset>
          <legend>Phone</legend>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="day-phone-1" name="day-phone-1" type="text" minlength="3" maxlength="3" pattern="(^\d{3}$)" placeholder="555" required [(ngModel)]="application.applicantInfo.dayPhone.areaCode" #dayPhone1="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="day-phone-2" name="day-phone-2" type="text" minlength="3" maxlength="3" pattern="(^\d{3}$)" placeholder="555" required [(ngModel)]="application.applicantInfo.dayPhone.prefix" #dayPhone2="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="day-phone-3" name="day-phone-3" type="text" minlength="4" maxlength="4" pattern="(^\d{4}$)" placeholder="5555" required [(ngModel)]="application.applicantInfo.dayPhone.number" #dayPhone3="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="day-phone-4" name="day-phone-4" type="text" placeholder="EXT" [(ngModel)]="application.applicantInfo.dayPhone.extension" />
          </div>
        </fieldset>
        <span id="day-phone-error" class="usa-input-error-message" role="alert" [hidden]="(dayPhone1.valid || dayPhone1.untouched) && (dayPhone2.valid || dayPhone2.untouched) && (dayPhone3.valid || dayPhone3.untouched)">Valid phone is required</span>

        <input id="add-additional-phone" name="add-additional-phone" type="checkbox" [(ngModel)]="additionalPhone" value="true" />
        <label class="usa-input" for="add-additional-phone">Add additional phone</label>

        <fieldset *ngIf="additionalPhone">
          <legend>Secondary Phone</legend>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="night-phone-1" name="night-phone-1" type="text" minlength="3" maxlength="3" pattern="(^\d{3}$)" placeholder="555" required [(ngModel)]="application.applicantInfo.eveningPhone.areaCode" #nightPhone1="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="night-phone-2" name="night-phone-2" type="text" minlength="3" maxlength="3" pattern="(^\d{3}$)" placeholder="555" required [(ngModel)]="application.applicantInfo.eveningPhone.prefix" #nightPhone2="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="night-phone-3" name="night-phone-3" type="text" minlength="4" maxlength="4" pattern="(^\d{4}$)" placeholder="5555" required [(ngModel)]="application.applicantInfo.eveningPhone.number" #nightPhone3="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <input class="usa-input-inline" id="night-phone-4" name="night-phone-4" type="text" placeholder="EXT" [(ngModel)]="application.applicantInfo.eveningPhone.extension" />
          </div>
          <span id="night-phone-error" class="usa-input-error-message clear" role="alert" [hidden]="(nightPhone1.valid || nightPhone1.untouched) && (nightPhone2.valid || nightPhone2.untouched) && (nightPhone3.valid || nightPhone3.untouched)">Valid phone is required</span>
        </fieldset>

        <div *ngIf="application.applicantInfo.orgType === 'Corporation'">
          <label class="usa-input" for="website">Website (optional)</label>
          <input id="website" name="website" type="url" [(ngModel)]="application.applicantInfo.website" />
        </div>

      </fieldset>

      <fieldset *ngIf="application.applicantInfo.orgType === 'Corporation'">
        <legend>Primary Permit Holder</legend>

        <label class="usa-input" for="primary-permit-holder-name">Primary permit holder name</label>
        <input id="primary-permit-holder-name" name="primary-permit-holder-name" type="text" required [(ngModel)]="application.applicantInfo.primaryPermitHolderName" #primaryPermitHolderName="ngModel" />
        <span id="primary-permit-holder-name-error" class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderName.valid || primaryPermitHolderName.untouched">Primary permit holder name is required</span>

        <input id="primary-permit-holder-same-address" name="primary-permit-holder-same-address" type="checkbox" [(ngModel)]="primaryPermitHolderSameAddress" />
        <label class="usa-input" for="primary-permit-holder-same-address">Permit holder address same as organization address</label>

        <div *ngIf="!primaryPermitHolderSameAddress">
          <label class="usa-input" for="primary-permit-holder-address">Address</label>
          <input id="primary-permit-holder-address" name="primary-permit-holder-address" type="text" required [(ngModel)]="application.applicantInfo.primaryMailingAddress" #primaryPermitHolderAddress="ngModel" />
          <span id="primary-permit-holder-address-error" class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderAddress.valid || primaryPermitHolderAddress.untouched">Address line 1 is required</span>

          <label class="usa-input" for="primary-permit-holder-address-line-2">Address Line 2 (optional)</label>
          <input id="primary-permit-holder-address-line-2" name="primary-permit-holder-address-line-2" type="text" [(ngModel)]="application.applicantInfo.primaryMailingAddress2" />

          <label class="usa-input" for="primary-permit-holder-city">City</label>
          <input id="primary-permit-holder-city" name="primary-permit-holder-city" type="text" required [(ngModel)]="application.applicantInfo.primaryMailingCity" #primaryPermitHolderCity="ngModel" />
          <span id="primary-permit-holder-city-error" class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderCity.valid || primaryPermitHolderCity.untouched">City is required</span>

          <label class="usa-input" for="primary-permit-holder-state">State</label>
          <select id="primary-permit-holder-state" name="primary-permit-holder-state" required [(ngModel)]="application.applicantInfo.primaryMailingState" #primaryPermitHolderState="ngModel">
            <option value="" selected="selected"></option>
            <option *ngFor="let state of states" [value]="state">{{state}}</option>
          </select>
          <span id="primary-permit-holder-state-error" class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderState.valid || primaryPermitHolderState.untouched">State is required</span>

          <label class="usa-input" for="primary-permit-holder-zip">ZIP</label>
          <input id="primary-permit-holder-zip" name="primary-permit-holder-zip" type="text" minlength="5" maxlength="5" pattern="(^\d{5}$)" required [(ngModel)]="application.applicantInfo.primaryMailingZip" #primaryPermitHolderZip="ngModel" />
          <span id="primary-permit-holder-zip-error" class="usa-input-error-message" role="alert" [hidden]="primaryPermitHolderZip.valid || primaryPermitHolderZip.untouched">Valid ZIP code is required</span>
        </div>

      </fieldset>

      <fieldset>
        <input id="add-secondary-permit-holder" name="add-secondary-permit-holder" type="checkbox" [(ngModel)]="viewSecondaryPermitHolder" />
        <label class="usa-input" for="add-secondary-permit-holder">Add a secondary permit holder</label>
        <span>If there is another person that would be a useful contact or significant user of the permit, please add their information.</span>
      </fieldset>

      <fieldset *ngIf="viewSecondaryPermitHolder">
        <legend>Secondary Permit Holder</legend>

        <label class="usa-input" for="secondary-permit-holder-name">Secondary permit holder name</label>
        <input id="secondary-permit-holder-name" name="secondary-permit-holder-name" type="text" required [(ngModel)]="application.applicantInfo.secondaryName" #secondaryPermitHolderName="ngModel" />
        <span id="secondary-permit-holder-name-error" class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderName.valid || secondaryPermitHolderName.untouched">Secondary permit holder name is required</span>

        <input id="secondary-permit-holder-same-address" name="secondary-permit-holder-same-address" type="checkbox" [(ngModel)]="secondaryPermitHolderSameAddress" />
        <label *ngIf="application.applicantInfo.orgType === 'Individual'" class="usa-input" for="secondary-permit-holder-same-address">Secondary permit holder address same as primary permit holder address</label>
        <label *ngIf="application.applicantInfo.orgType === 'Corporation'" class="usa-input" for="secondary-permit-holder-same-address">Secondary permit holder address same as organization address</label>

        <div *ngIf="!secondaryPermitHolderSameAddress">
          <label class="usa-input" for="secondary-permit-holder-address">Address</label>
          <input id="secondary-permit-holder-address" name="secondary-permit-holder-address" type="text" required [(ngModel)]="application.applicantInfo.secondaryMailingAddress" #secondaryPermitHolderAddress="ngModel" />
          <span id="secondary-permit-holder-address-error" class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderAddress.valid || secondaryPermitHolderAddress.untouched">Address line 1 is required</span>

          <label class="usa-input" for="secondary-permit-holder-address-line-2">Address Line 2 (optional)</label>
          <input id="secondary-permit-holder-address-line-2" name="secondary-permit-holder-address-line-2" type="text" [(ngModel)]="application.applicantInfo.secondaryMailingAddress2" />

          <label class="usa-input" for="secondary-permit-holder-city">City</label>
          <input id="secondary-permit-holder-city" name="secondary-permit-holder-city" type="text" required [(ngModel)]="application.applicantInfo.secondaryMailingCity" #secondaryPermitHolderCity="ngModel" />
          <span id="secondary-permit-holder-city-error" class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderCity.valid || secondaryPermitHolderCity.untouched">City is required</span>

          <label class="usa-input" for="secondary-permit-holder-state">State</label>
          <select id="secondary-permit-holder-state" name="secondary-permit-holder-state" required [(ngModel)]="application.applicantInfo.secondaryMailingState" #secondaryPermitHolderState="ngModel">
            <option value="" selected="selected"></option>
            <option *ngFor="let state of states" [value]="state">{{state}}</option>
          </select>
          <span id="secondary-permit-holder-state-error" class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderState.valid || secondaryPermitHolderState.untouched">State is required</span>

          <label class="usa-input" for="secondary-permit-holder-zip">ZIP</label>
          <input id="secondary-permit-holder-zip" name="secondary-permit-holder-zip" type="text" minlength="5" maxlength="5" pattern="(^\d{5}$)" required [(ngModel)]="application.applicantInfo.secondaryMailingZIP" #secondaryPermitHolderZip="ngModel" />
          <span id="secondary-permit-holder-zip-error" class="usa-input-error-message" role="alert" [hidden]="secondaryPermitHolderZip.valid || secondaryPermitHolderZip.untouched">Valid ZIP code is required</span>
        </div>

      </fieldset>

      <hr/>

      <fieldset>
        <legend>Event Details</legend>
        <label class="usa-input" for="location">Location and description of National Forest system lands and facilities applicant would like to use</label>
        <input id="location" name="location" type="text" required [(ngModel)]="application.noncommercialFields.locationDescription" #location="ngModel" />
        <span id="location-error" class="usa-input-error-message" role="alert" [hidden]="location.valid || location.untouched">Location is required</span>

        <label class="usa-input" for="participants">Estimated number of participants</label>
        <span class="help-text usa-form-hint">This is the number of people who will directly participate in the event.</span>
        <input id="participants" name="participants" type="number" required [(ngModel)]="application.noncommercialFields.numberParticipants" #participants="ngModel" />
        <span id="participants-error" class="usa-input-error-message" role="alert" [hidden]="participants.valid || participants.untouched">Participants is required</span>

        <label class="usa-input" for="spectators">Estimated number of spectators</label>
        <span class="help-text usa-form-hint">If your event will have spectators (such as at a sporting event), please note how many additional people will be spectators</span>
        <input id="spectators" name="spectators" type="number" [(ngModel)]="application.noncommercialFields.spectators" #spectators="ngModel" />


        <label class="usa-input" for="activity-description">Description of proposed activity</label>
        <textarea id="activity-description" name="activity-description" required [(ngModel)]="application.noncommercialFields.activityDescription" #activityDescription="ngModel"></textarea>
        <span id="activity-description-error" class="usa-input-error-message" role="alert" [hidden]="activityDescription.valid || activityDescription.untouched">Activity Description is required</span>

        <fieldset>
          <legend>Start Date</legend>
          <div class="usa-form-group usa-form-group-month">
            <label for="start-month">Month</label>
            <input class="usa-input-inline" id="start-month" name="start-month" type="text" minlength="1" maxlength="2" pattern="(0?[1-9]|1[012])" required [(ngModel)]="application.noncommercialFields.startMonth" #startMonth="ngModel" (change)="startDateChangeHandler()" />
          </div>
          <div class="usa-form-group usa-form-group-day">
            <label for="start-day">Day</label>
            <input class="usa-input-inline" id="start-day" name="start-day" type="text" minlength="1" maxlength="2" pattern="(0?[1-9]|1[0-9]|2[0-9]|3[01])" required [(ngModel)]="application.noncommercialFields.startDay" #startDay="ngModel" (change)="startDateChangeHandler()" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="start-year">Year</label>
            <input class="usa-input-inline" id="start-year" name="start-year" type="text" minlength="4" maxlength="4" pattern="([0-9]{4})" required [(ngModel)]="application.noncommercialFields.startYear" #startYear="ngModel" (change)="startDateChangeHandler()" />
          </div>
        </fieldset>
        <span id="start-date-error" class="usa-input-error-message" role="alert" [hidden]="(startMonth.valid || startMonth.untouched) && (startDay.valid || startDay.untouched) && (startYear.valid || startYear.untouched)">Start date is required</span>

        <fieldset>
          <legend>Start Time </legend>
          <div class="usa-form-group usa-form-group-year">
            <label for="start-hour">Hour</label>
            <select class="usa-input-inline" id="start-hour" name="start-hour" required [(ngModel)]="application.noncommercialFields.startHour" #startHour="ngModel">
              <option value="" selected="selected"></option>
              <option *ngFor="let hour of hours" [value]="hour">{{hour}}</option>
            </select>
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="start-minutes">Minutes</label>
            <select class="usa-input-inline" id="start-minutes" name="start-minutes" required [(ngModel)]="application.noncommercialFields.startMinutes" #startMinutes="ngModel">
              <option value="" selected="selected"></option>
              <option *ngFor="let minute of minutes" [value]="minute">{{minute}}</option>
            </select>
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="start-period">AM / PM</label>
            <select class="usa-input-inline" id="start-period" name="start-period" required [(ngModel)]="application.noncommercialFields.startPeriod" #startPeriod="ngModel">
              <option value="" selected="selected"></option>
              <option value="AM">AM</option>
              <option value="PM">PM</option>
            </select>
          </div>
        </fieldset>
        <span id="start-time-error" class="usa-input-error-message" role="alert" [hidden]="(startHour.valid || startHour.untouched) && (startMinutes.valid || startMinutes.untouched) && (startPeriod.valid || startPeriod.untouched)">Start time is required</span>

        <fieldset>
          <legend>End Date</legend>
          <div class="usa-form-group usa-form-group-month">
            <label for="end-month">Month</label>
            <input class="usa-input-inline" id="end-month" name="end-month" type="text" minlength="1" maxlength="2" pattern="(0?[1-9]|1[012])" required [(ngModel)]="application.noncommercialFields.endMonth" #endMonth="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-day">
            <label for="end-day">Day</label>
            <input class="usa-input-inline" id="end-day" name="end-day" type="text" minlength="1" maxlength="2" pattern="(0?[1-9]|1[0-9]|2[0-9]|3[01])" required [(ngModel)]="application.noncommercialFields.endDay" #endDay="ngModel" />
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="end-year">Year</label>
            <input class="usa-input-inline" id="end-year" name="end-year" type="text" minlength="4" maxlength="4" pattern="([0-9]{4})" required [(ngModel)]="application.noncommercialFields.endYear" #endYear="ngModel" />
          </div>
        </fieldset>
        <span id="end-date-error" class="usa-input-error-message" role="alert" [hidden]="(endMonth.valid || endMonth.untouched) && (endDay.valid || endDay.untouched) && (endYear.valid || endYear.untouched)">End date is required</span>

        <fieldset>
          <legend>End Time </legend>
          <div class="usa-form-group usa-form-group-year">
            <label for="end-hour">Hour</label>
            <select class="usa-input-inline" id="end-hour" name="end-hour" required [(ngModel)]="application.noncommercialFields.endHour" #endHour="ngModel">
              <option value="" selected="selected"></option>
              <option *ngFor="let hour of hours" [value]="hour">{{hour}}</option>
            </select>
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="end-minutes">Minutes</label>
            <select class="usa-input-inline" id="end-minutes" name="end-minutes" required [(ngModel)]="application.noncommercialFields.endMinutes" #endMinutes="ngModel">
              <option value="" selected="selected"></option>
              <option *ngFor="let minute of minutes" [value]="minute">{{minute}}</option>
            </select>
          </div>
          <div class="usa-form-group usa-form-group-year">
            <label for="end-period">AM / PM</label>
            <select class="usa-input-inline" id="end-period" name="end-period" required [(ngModel)]="application.noncommercialFields.endPeriod" #endPeriod="ngModel">
              <option value="" selected="selected"></option>
              <option value="AM">AM</option>
              <option value="PM">PM</option>
            </select>
          </div>
        </fieldset>
        <span id="end-time-error" class="usa-input-error-message" role="alert" [hidden]="(endHour.valid || endHour.untouched) && (endMinutes.valid || endMinutes.untouched) && (endPeriod.valid || endPeriod.untouched)">End time is required</span>
      </fieldset>

      <hr/>

      <fieldset>
        <legend>Signature</legend>
        <label class="usa-input" for="signature">Type your initials here as a signature on your application</label>
        <input id="signature" name="signature" type="text" required [(ngModel)]="application.signature" #signature="ngModel" />
        <span id="signature-error" class="usa-input-error-message" role="alert" [hidden]="signature.valid || signature.untouched">Signature is required</span>
      </fieldset>

      <button class="usa-button-big" type="submit">Submit Your Application</button>

    </form>
  </div>
</section>
